---
title: Управление потоком
date: 2025-02-24 15:00:00
showTableOfContents: true
showComments: true
katex: true
tags:
  - zig
  - zigbook
---

Предыдущая глава получилась у нас довольно сложная и объемная, поэтому давайте немного отдохнем от сложного погружения и рассмотрим в этой главе операторы управления потоком выполнения, а в следующей главе снова нырнем в язык и рассмотрми слайсы и строки в языке Zig.

## Операторы управления потоком
Операторы управления потоком в Zig наверняка покажутся вам знакомыми, однако их взаимодействие с некоторыми особенностями языка имеет нюансы. Итак давайте начнем с самого популярного и простого оператора управления потоком - оператора `if`.

### Оператор `if`
Оператор `if/else` управляет выполнением кода в зависимости от заданного условия. Этот механизм, называемый условным управлением потоком или управлением выбором, позволяет программе либо выполнить определённый блок команд, либо пропустить его на основе логического выражения. В программировании и компьютерных науках этот процесс также часто называют «ветвлением». Проще говоря, `if/else` использует результат логической проверки, чтобы определить, следует ли выполнять конкретный фрагмент кода.

Оператор `if` в Zig имеет следующий синтаксис:

```zig
if (condition) {
    // код, который выполняется, если условие истинно
} else if (another_condition) {
    // код, который выполняется, если второе условие истинно
} else {
    // код, который выполняется, если все условия ложны
}
```

В Zig оператор `if/else` записывается с использованием ключевых слов `if` и `else`. Сначала идет `if`, за которым следует логическое выражение в круглых скобках. Затем открываются фигурные скобки, внутри которых находится код, который выполняется, если условие истинно (true).

После основного условия можно добавить дополнительные проверки, которые будут выполняться, если предыдущее выражение оказалось ложным. Для этого используется ключевое слово `else if`, за которым следует новое условие в круглых скобках и блок кода в фигурных скобках, который выполняется при его истинности. Также можно просто добавить `else` с фигурными скобками, содержащими код, который выполнится, если ни одно из предыдущих условий не оказалось верным.

Давайте рассмотрим пример использования оператора `if`:

```zig
const std = @import("std");

pub fn main() void {
    const number: i32 = -5;

    if (number > 0) {
        std.debug.print("Число {} положительное\n", .{number});
    } else if (number < 0) {
        std.debug.print("Число {} отрицательное\n", .{number});
    } else {
        std.debug.print("Число равно нулю\n", .{});
    }
}
```

В данном примере мы проверяем значение переменной `number` и выводим соответствующее сообщение в зависимости от ее знака. Если `number` больше нуля, то выводится сообщение "Число {number} положительное". Если `number` меньше нуля, то выводится сообщение "Число {number} отрицательное". Если `number` равен нулю, то выводится сообщение "Число равно нулю".

В Zig, в отличие от многих других языков, оператор `if` может возвращать значение. Это особенно полезно, когда нужно присвоить переменной значение в зависимости от условий.

```zig
const should_drive = if (speed > 10) {
  true
} else {
  false
};
```

В случае, если в блоках вашего оператора `if/elseif/else` всего одна инструкция, мы можем сделать наш условный оператор еще короче, убрав фигурные скобки:

```zig
const should_drive = if (speed > 10) true else false;
```

### Оператор switch
Оператор `switch` в Zig позволяет проверять значение переменной и выполнять соответствующий код в зависимости от совпадения. Это удобный способ обработки множества вариантов без громоздких `if/else if` конструкций. Оператор `switch` в Zig похож на аналогичный оператор в Rust тем, что он требует указания всех возможных вариантов. Вы также можете использовать диапазоны или перечисления в операторе `switch`. Давайте рассмотрим примеры:
